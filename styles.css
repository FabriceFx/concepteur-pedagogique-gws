@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap');

body {
    font-family: 'Google Sans', 'Inter', sans-serif;
    background-color: #f8fafc;
    color: #0f172a;
    font-size: 0.92rem;
    line-height: 1.4;
}

.pattern-stripes {
    background-image: linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
    background-size: 8px 8px;
}

.pattern-dots {
    background-image: radial-gradient(rgba(255,255,255,0.5) 1.5px, transparent 1.5px);
    background-size: 6px 6px;
}

.pattern-vertical {
    background-image: repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(255,255,255,0.3) 2px, rgba(255,255,255,0.3) 4px);
}

.pattern-grid-dark {
        background-image: linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,0,0,0.1) 1px, transparent 1px);
    background-size: 6px 6px;
}

body.hide-types .learning-type-container,
body.hide-types .timeline-track-pedagogy,
body.hide-types .activity-type-bar {
    display: none !important;
}

.activity-container {
    border-left: 3px solid #cbd5e1; 
}

.step-card {
    transition: transform 0.1s ease;
}

.sortable-ghost {
    opacity: 0.3;
    background-color: #f1f5f9 !important;
    border: 2px dashed #94a3b8 !important;
}

.sortable-drag {
    cursor: grabbing;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

/* --- GOOGLE WORKSPACE COLORS --- */
.type-none { border-left: 5px solid #f1f3f4; }
.type-demonstration { border-left: 5px solid #4285F4; } /* Blue */
.type-lab { border-left: 5px solid #EA4335; } /* Red */
.type-collaboration { border-left: 5px solid #FBBC05; } /* Yellow */
.type-evaluation { border-left: 5px solid #34A853; } /* Green */
.type-scenario { border-left: 5px solid #A142F4; } /* Violet */
.type-migration { border-left: 5px solid #FA7B17; } /* Orange */

.select-none { background-color: #f1f3f4; color: #3c4043; border-color: #dadce0; }
.select-demonstration { background-color: #e8f0fe; color: #1967d2; border-color: #4285F4; }
.select-lab { background-color: #fce8e6; color: #c5221f; border-color: #EA4335; }
.select-collaboration { background-color: #fef7e0; color: #ea8600; border-color: #FBBC05; }
.select-evaluation { background-color: #e6f4ea; color: #137333; border-color: #34A853; }
.select-scenario { background-color: #f3e8fd; color: #8430ce; border-color: #A142F4; }
.select-migration { background-color: #ffe0b2; color: #e65100; border-color: #FA7B17; }

.drag-handle {
    cursor: grab;
    touch-action: none;
    user-select: none;
}
.drag-handle:active {
    cursor: grabbing;
}

.material-icons-round {
    display: inline-flex;
    vertical-align: middle;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
}

.panel-content {
    transition: max-height 0.2s ease-out, opacity 0.2s ease-out;
    max-height: 0;
    opacity: 0;
    overflow: hidden;
}
.panel-content.open {
    max-height: 2000px; 
    opacity: 1;
}
.rotate-icon {
    transition: transform 0.2s ease;
}
.rotate-icon.open {
    transform: rotate(180deg);
}

.step-body {
    transition: max-height 0.2s ease-out, opacity 0.2s ease-out;
    max-height: 2000px;
    opacity: 1;
    overflow: hidden;
}
.step-body.collapsed {
    max-height: 0;
    opacity: 0;
    margin-top: 0;
    padding-bottom: 0 !important;
}

.activity-body {
    transition: max-height 0.2s ease-out, opacity 0.2s ease-out;
    max-height: 5000px; 
    opacity: 1;
    overflow: hidden;
}
.activity-body.collapsed {
    max-height: 0;
    opacity: 0;
}

.moment-body {
    transition: max-height 0.2s ease-out, opacity 0.2s ease-out;
    max-height: 5000px;
    opacity: 1;
    overflow: hidden;
}
.moment-body.collapsed {
    max-height: 0;
    opacity: 0;
}

input, select, textarea {
    font-size: 0.9rem;
}

input::placeholder, textarea::placeholder {
    color: #94a3b8;
}

:focus-visible {
    outline: 2px solid rgba(66, 133, 244, 0.55);
    outline-offset: 2px;
}

.compact-label {
    font-size: 0.72rem;
    text-transform: uppercase;
    font-weight: 700;
    color: #64748b;
    letter-spacing: 0.04em;
    margin-bottom: 4px;
}

.compact-label-lg {
    font-size: 0.8rem;
}

@media print {
    .no-print { display: none; }
    body { background: white; padding: 0; }
    .activity-group { break-inside: avoid; margin-bottom: 1rem; border: none; border-radius: 8px; padding: 0.5rem; }
    .step-card { border: none; break-inside: avoid; margin-bottom: 0.5rem; }
    select { appearance: none; border: none; padding: 0; background: none; }
    textarea { border: none; padding: 0; }
    #key-params-panel { max-height: none !important; opacity: 1 !important; display: block !important; }
    .step-body.collapsed, .activity-body.collapsed { max-height: none !important; opacity: 1 !important; display: block !important; }
}

.activity-group { scroll-margin-top: 80px; }
.step-card { box-shadow: 0 1px 2px rgba(15, 23, 42, 0.06); }
.step-card:hover { box-shadow: 0 6px 16px rgba(15, 23, 42, 0.08); }
.activity-title { letter-spacing: -0.01em; }
.activity-container { border-left-color: #cbd5e1; }

header { margin-bottom: 0.5rem ; }
.activity-group { padding: 0.5rem ; }
.activity-group > .flex { margin-bottom: 0.5rem ; gap: 0.5rem ; }
.step-card > .flex.items-center { padding: 6px 8px ; gap: 0.5rem ; }
.step-body.panel-content { padding: 0.5rem ; padding-top: 0.35rem ; }
.activity-description { padding: 0.35rem 0.5rem ; font-size: 0.85rem ; }
.activity-steps-container { padding-top: 0.25rem; }
input, select, textarea { font-size: 0.88rem; }
.compact-label { font-size: 0.68rem; margin-bottom: 2px; }
.compact-label-lg { font-size: 0.74rem; }

.step-body label [data-i18n="label_grouping"] { font-size: 10px; }
#timeline-panel { gap: 0.75rem ; }
#timeline-panel .timeline-track-pedagogy,
#timeline-panel .flex.flex-col.gap-0\.5 { gap: 0.35rem ; }

#timeline-panel [data-i18n^="label_timeline_"] { font-size: 0.82rem ; }
#timeline-panel [data-i18n^="label_"][data-i18n$="grouping"],
#timeline-panel [data-i18n="label_trainer"],
#timeline-panel [data-i18n="label_place"],
#timeline-panel [data-i18n="label_time"] { font-size: 0.95rem ; }
#timeline-panel [data-i18n^="legend_"] { font-size: 0.82rem ; }
#timeline-panel #timeline-activities-planned-labels,
#timeline-panel #timeline-activities-labels { font-size: 0.85rem ; }
#timeline-ruler { font-size: 0.82rem ; }

body.hc {
    background-color: #ffffff;
    color: #0f172a;
}
body.hc .text-slate-300 { color: #475569 !important; }
body.hc .text-slate-400 { color: #334155 !important; }
body.hc .text-slate-500 { color: #334155 !important; }
body.hc .text-slate-600 { color: #1f2937 !important; }
body.hc .text-slate-700 { color: #0f172a !important; }
body.hc .bg-slate-50 { background-color: #f8fafc !important; }
body.hc .bg-slate-100 { background-color: #f1f5f9 !important; }
body.hc .border-slate-100 { border-color: #cbd5e1 !important; }
body.hc .border-slate-200 { border-color: #94a3b8 !important; }
body.hc .border-slate-300 { border-color: #64748b !important; }
body.hc .activity-container { border-left-color: #475569 !important; }
body.hc .activity-type-bar { background-color: #e2e8f0 !important; border-color: #94a3b8 !important; }
body.hc #timeline-activities-planned,
body.hc #timeline-activities,
body.hc #timeline-steps,
body.hc #timeline-grouping,
body.hc #timeline-trainer,
body.hc #timeline-place,
body.hc #timeline-time {
    border-color: #94a3b8 !important;
    background-color: #e2e8f0 !important;
}
body.hc #timeline-ruler { color: #0f172a !important; }
body.hc #custom-confirm-modal { background-color: rgba(15, 23, 42, 0.75) !important; }
body.hc #global-tooltip { background-color: #0f172a !important; border-color: #0f172a !important; }
body.hc :focus-visible {
    outline-color: rgba(37, 99, 235, 0.8);
}

#timeline-details .timeline-track { padding: 0.40rem; }
#timeline-details .timeline-track { background: transparent !important; border: 0 !important; }

#timeline-details [data-i18n="label_grouping"],
#timeline-details [data-i18n="label_trainer"],
#timeline-details [data-i18n="label_place"],
#timeline-details [data-i18n="label_time"],
.step-card [data-i18n="label_grouping"],
.step-card [data-i18n="label_trainer"],
.step-card [data-i18n="label_place"],
.step-card [data-i18n="label_time"]{
  font-size: 10px !important;
}

.step-card .step-group-mode,
.step-card .trainer-select,
.step-card .place-select,
.step-card .time-select {
  font-size: 10px !important;
}

#timeline-panel .timeline-duration-label { background: transparent !important; border: 0 !important; box-shadow: none !important; }

#timeline-panel .timeline-track { transition: box-shadow 0.15s ease; }
#timeline-panel .timeline-track:hover { box-shadow: 0 8px 22px rgba(15, 23, 42, 0.06); }
#timeline-panel { padding: 0.5rem ; }
#timeline-panel #timeline-activities-planned,
#timeline-panel #timeline-activities,
#timeline-panel #timeline-steps { height: 1.25rem ; }
#timeline-panel #timeline-grouping,
#timeline-panel #timeline-trainer,
#timeline-panel #timeline-place,
#timeline-panel #timeline-time { height: 0.95rem ; }
#timeline-panel #timeline-ruler { height: 2.25rem ; }

#timeline-ruler { padding: 0.25rem 0.4rem 0.15rem 0.4rem; }
#timeline-ruler .timeline-ruler-tick { top: 0.3rem; bottom: 1.15rem; background-color: #94a3b8; }
#timeline-ruler .timeline-ruler-label {
    bottom: 0.15rem;
    font-size: 0.78rem;
    font-weight: 400;
    color: #0f172a;
    background-color: rgba(255, 255, 255, 0.92);
    border: none;
    padding: 0 0.25rem;
    border-radius: 0.25rem;
    line-height: 1.1;
}
#timeline-ruler .timeline-ruler-label { font-size: 0.74rem; }
body.hc #timeline-ruler .timeline-ruler-tick { background-color: #475569; }
body.hc #timeline-ruler .timeline-ruler-label { border-color: #94a3b8; background-color: #ffffff; }

.moment-target-wrap{display:none !important;}

.timeline-missing-light,
.timeline-alert-light{
    background:
      repeating-linear-gradient(
        135deg,
        rgba(254, 202, 202, 0.95),
        rgba(254, 202, 202, 0.95) 8px,
        rgba(239, 68, 68, 0.22) 8px,
        rgba(239, 68, 68, 0.22) 16px
      );
    box-shadow: inset 0 0 0 2px rgba(239, 68, 68, 0.95);
}

.duration-alert-light{
    background: rgba(254, 202, 202, 0.95) !important;
    border-color: rgba(239, 68, 68, 0.55) !important;
    box-shadow: inset 0 0 0 2px rgba(239, 68, 68, 0.35) !important;
}

.timeline-alert-icons{
    position:absolute;
    top:-18px;
    right:6px;
    display:flex;
    gap:6px;
    align-items:center;
    z-index:60;
    pointer-events:none;
    padding:2px 6px;
    border-radius:9999px;
    background: rgba(239, 68, 68, 0.92);
    box-shadow: 0 2px 10px rgba(15, 23, 42, 0.35);
     color: #ffffff;
    font-size: 12px;
    font-weight: 800;
    line-height: 1;
    letter-spacing: 0.2px;
    text-transform: uppercase;
}
.timeline-alert-icons svg{
    width:16px;
    height:16px;
    opacity:1;
    filter: drop-shadow(0 1px 2px rgba(15, 23, 42, 0.45));
}

@keyframes timelineAlertPulse{
    0%, 100% { filter: saturate(1) brightness(1); }
    50%      { filter: saturate(1.15) brightness(1.05); }
}
.timeline-missing-light,
.timeline-alert-light{
    animation: timelineAlertPulse 1.4s ease-in-out infinite;
}

.timeline-overrun-light{background:#fecaca;}

#timeline-panel #timeline-activities{ overflow: visible !important; }

.timeline-zoom-outer{
    overflow-x: auto !important;
    overflow-y: hidden !important;
}
.timeline-inner{
    display: flex;
    height: 100%;
    min-width: 100%;
}

#timelines-wrapper{
  width: 100%;
  max-width: 100%;
  min-width: 0; 
  box-sizing: border-box;
}
#timelines-wrapper .panel-content,
#timelines-wrapper #timeline-panel{
  width: 100%;
  max-width: 100%;
  min-width: 0;
  box-sizing: border-box;
}
#timelines-wrapper #timeline-panel{
  overflow-x: hidden; 
}
#timelines-wrapper .timeline-track,
#timelines-wrapper .timeline-track > *{
  max-width: 100%;
  min-width: 0;
  box-sizing: border-box;
}

#timelines-wrapper .timeline-zoom-outer{
  max-width: 100%;
  overflow-x: auto !important;
  overflow-y: hidden !important;
}

#timeline-panel #timeline-activities{
  overflow-x: hidden !important;
  overflow-y: visible !important;
}

#timeline-hscroll{
  width: 100%;
  max-width: 100%;
  overflow-x: scroll;
  overflow-y: hidden;
  scrollbar-gutter: stable both-edges;
  height: 28px;
  margin-top: 10px;
  border-radius: 9999px;
  border: 1px solid rgba(148,163,184,0.70);
  background: rgba(241,245,249,0.98);
  box-sizing: border-box;
  cursor: ew-resize;
}

#timeline-hscroll::-webkit-scrollbar{ height: 18px; }
#timeline-hscroll::-webkit-scrollbar-track{
  background: rgba(226,232,240,0.95);
  border-radius: 9999px;
}
#timeline-hscroll::-webkit-scrollbar-thumb{
  background: rgba(71,85,105,0.85);
  border-radius: 9999px;
  border: 4px solid rgba(226,232,240,0.95);
}
#timeline-hscroll::-webkit-scrollbar-thumb:hover{ background: rgba(51,65,85,0.95); }

#timeline-hscroll{ scrollbar-width: auto; scrollbar-color: rgba(71,85,105,0.85) rgba(226,232,240,0.95); }

#timeline-hscroll-inner{
  height: 1px;
  width: 0px;
}

#timeline-panel .timeline-zoom-outer{
  scrollbar-width: none;
}
#timeline-panel .timeline-zoom-outer::-webkit-scrollbar{
  height: 0px;
  width: 0px;
}

#timeline-hscroll{ position: relative; }
#timeline-hscroll-thumb{
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  height: 18px;
  width: 72px;
  border-radius: 9999px;
  background: rgba(71,85,105,0.85);
  border: 4px solid rgba(226,232,240,0.95);
  box-sizing: border-box;
  cursor: grab;
  z-index: 5;
}
#timeline-hscroll-thumb:active{ cursor: grabbing; }

#timeline-hscroll{ scrollbar-width: none; }
#timeline-hscroll::-webkit-scrollbar{ height: 0px; width: 0px; }

.temp-highlight {
  outline: 3px solid rgba(245, 158, 11, 0.9);
  outline-offset: 2px;
  border-radius: 14px;
}

body.focus-mode .activity-group { display: none; }
body.focus-mode .activity-group.focus-active { display: block; }
